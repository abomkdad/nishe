<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ù†ÙŠØ´ ÙˆØ§Ù„Ø³Ù„ÙƒØªÙ Ø§Ù„Ø­ØµØ±ÙŠØ©</title>
    
    <style>
        body { font-family: Tahoma, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; color: #333; }
        header { background-color: #5d4037; color: white; padding: 20px; text-align: center; }
        h1 { margin: 0; }
        main { display: flex; max-width: 1200px; margin: 20px auto; padding: 0 15px; flex-wrap: wrap; }
        section { flex: 3; padding: 20px; background: white; border-radius: 8px; margin-bottom: 20px; }
        #cart-summary { flex: 1; padding: 20px; background: #fff8e1; border: 1px solid #ffecb3; border-radius: 8px; position: sticky; top: 20px; height: fit-content; min-width: 250px; margin-right: 20px; }
        .perfume-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-top: 15px; }
        .perfume-item { border: 1px solid #ddd; padding: 10px; text-align: center; background: #fff; border-radius: 6px; transition: transform 0.2s; }
        .perfume-item:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .perfume-item img { width: 100%; height: auto; max-height: 180px; object-fit: cover; border-radius: 4px; margin-bottom: 10px; }
        .add-to-cart { background-color: #8d6e63; color: white; border: none; padding: 8px 15px; cursor: pointer; border-radius: 4px; margin-top: 10px; font-weight: bold; width: 100%; }
        .add-to-cart:hover { background-color: #6d4c41; }
        #cart-list { list-style: none; padding: 0; }
        #cart-list li { margin-bottom: 8px; padding-bottom: 5px; border-bottom: 1px dotted #ccc; font-size: 0.9em; }
        #total-price { font-weight: bold; color: #b71c1c; font-size: 1.5em; }
        .gift { color: green; font-weight: bold; }
        .discount { color: orange; font-weight: bold; }
        #whatsapp-send-button { background-color: #25D366; color: white; border: none; padding: 12px; width: 100%; margin-top: 15px; border-radius: 6px; cursor: pointer; font-size: 1.1em; font-weight: bold; }
        #whatsapp-send-button:hover { background-color: #1FAF59; }

        @media (max-width: 900px) {
            main { flex-direction: column; }
            #cart-summary { margin-right: 0; order: -1; } /* ÙˆØ¶Ø¹ Ø§Ù„Ù…Ù„Ø®Øµ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        }
    </style>
</head>
<body>
    <header>
        <h1>âœ¨ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„ÙØ§Ø®Ø±Ø© Ù„Ø§ ØªÙÙ‚Ø§ÙˆÙ…! âœ¨</h1>
        <p>â­ Ø§Ø®ØªØ± Ø¹Ø·ÙˆØ± **Ø§Ù„Ù†ÙŠØ´** ÙˆØ§Ø³ØªÙØ¯ Ù…Ù† Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª Ø£Ùˆ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ø¹Ù„Ù‰ Ø¹Ø·ÙˆØ± **Ø§Ù„Ø³Ù„ÙƒØªÙ**.</p>
    </header>

    <main>
        <section>
            <h2>Ø¹Ø·ÙˆØ± Ø§Ù„Ù†ÙŠØ´ Ø§Ù„ÙØ§Ø®Ø±Ø©</h2>
            <div class="perfume-grid">
                <div class="perfume-item" data-id="N1" data-type="niche" data-price="200" data-name="Ø¹Ø·Ø± Ù†ÙŠØ´ Ø¹Ù†Ø¨Ø± 1">
                    <img src="images/niche/niche1.jpg" alt="Ø¹Ø·Ø± Ù†ÙŠØ´ Ø¹Ù†Ø¨Ø± 1">
                    <h3>Ø¹Ø·Ø± Ù†ÙŠØ´ Ø¹Ù†Ø¨Ø± 1</h3>
                    <p>Ø§Ù„Ø³Ø¹Ø±: 200$</p>
                    <button class="add-to-cart">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
                </div>
                <div class="perfume-item" data-id="N2" data-type="niche" data-price="250" data-name="Ø¹Ø·Ø± Ù†ÙŠØ´ Ø¬Ù„Ø¯ 2">
                    <img src="images/niche/niche2.jpg" alt="Ø¹Ø·Ø± Ù†ÙŠØ´ Ø¬Ù„Ø¯ 2">
                    <h3>Ø¹Ø·Ø± Ù†ÙŠØ´ Ø¬Ù„Ø¯ 2</h3>
                    <p>Ø§Ù„Ø³Ø¹Ø±: 250$</p>
                    <button class="add-to-cart">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
                </div>
                </div>

            <hr style="margin: 30px 0;">

            <h2>Ø¹Ø·ÙˆØ± Ø§Ù„Ø³Ù„ÙƒØªÙ (Ù†Ø³Ø§Ø¦ÙŠØ© ÙˆØ±Ø¬Ø§Ù„ÙŠØ©)</h2>
            <p>ÙŠÙ…ÙƒÙ† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø£ÙŠ Ø¹Ø·Ø± Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©.</p>
            <div class="perfume-grid">
                <div class="perfume-item" data-id="SW1" data-type="selective" data-price="100" data-name="Ù†Ø³Ø§Ø¦ÙŠ Ø³Ù„ÙƒØªÙ Ø²Ù‡Ø±ÙŠ">
                    <img src="images/selective-women/sw1.jpg" alt="Ù†Ø³Ø§Ø¦ÙŠ Ø³Ù„ÙƒØªÙ Ø²Ù‡Ø±ÙŠ">
                    <h3>Ù†Ø³Ø§Ø¦ÙŠ Ø³Ù„ÙƒØªÙ Ø²Ù‡Ø±ÙŠ</h3>
                    <p>Ø§Ù„Ø³Ø¹Ø±: 100$</p>
                    <button class="add-to-cart">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
                </div>
                <div class="perfume-item" data-id="SM1" data-type="selective" data-price="90" data-name="Ø±Ø¬Ø§Ù„ÙŠ Ø³Ù„ÙƒØªÙ ØªÙˆØ§Ø¨Ù„">
                    <img src="images/selective-men/sm1.jpg" alt="Ø±Ø¬Ø§Ù„ÙŠ Ø³Ù„ÙƒØªÙ ØªÙˆØ§Ø¨Ù„">
                    <h3>Ø±Ø¬Ø§Ù„ÙŠ Ø³Ù„ÙƒØªÙ ØªÙˆØ§Ø¨Ù„</h3>
                    <p>Ø§Ù„Ø³Ø¹Ø±: 90$</p>
                    <button class="add-to-cart">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
                </div>
                </div>
        </section>

        <aside id="cart-summary">
            <h2>ğŸ›’ Ù…Ù„Ø®Øµ Ø§Ù„Ø³Ù„Ø©</h2>
            <ul id="cart-list">
                </ul>
            <h3>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="total-price">0.00$</span></h3>
            
            <button id="whatsapp-send-button">
                Ø£Ø±Ø³Ù„ Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
            </button>
            
            <p style="font-size: 0.85em; margin-top: 15px; color: #666;">* ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ø±Ø¶ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ø£Ø±Ø®Øµ Ø¹Ø·Ø± Ø³Ù„ÙƒØªÙ ÙÙŠ Ø§Ù„Ø³Ù„Ø©.</p>
        </aside>
    </main>

    <script>
        let cart = []; // Ù…ØµÙÙˆÙØ© Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¹Ø·ÙˆØ± ÙÙŠ Ø§Ù„Ø³Ù„Ø©

        function addToCart(event) {
            const itemElement = event.target.closest('.perfume-item');
            if (!itemElement) return;

            const itemId = itemElement.dataset.id;
            
            // Ù…Ù†Ø¹ Ø¥Ø¶Ø§ÙØ© Ù†ÙØ³ Ø§Ù„Ø¹Ø·Ø± Ù…Ø±ØªÙŠÙ†
            if (cart.some(item => item.id === itemId)) {
                alert("Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø·Ø± Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©.");
                return;
            }

            const item = {
                id: itemId,
                name: itemElement.dataset.name,
                type: itemElement.dataset.type,
                basePrice: parseFloat(itemElement.dataset.price),
                finalPrice: parseFloat(itemElement.dataset.price),
                isDiscounted: false 
            };
            
            cart.push(item);
            updateCartAndOffers();
        }

        function updateCartAndOffers() {
            // 1. Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø³Ù„ÙƒØªÙ Ù‚Ø¨Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            cart.forEach(item => {
                if (item.type === 'selective') {
                    item.finalPrice = item.basePrice; 
                    item.isDiscounted = false;
                }
            });

            // 2. Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø¹Ø·ÙˆØ± Ø§Ù„Ù†ÙŠØ´
            const nicheCount = cart.filter(item => item.type === 'niche').length;

            // 3. ØªØ­Ø¯ÙŠØ¯ Ø£Ø±Ø®Øµ Ø¹Ø·Ø± Ø³Ù„ÙƒØªÙ ÙÙŠ Ø§Ù„Ø³Ù„Ø© Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„ÙŠÙ‡
            let selectiveItems = cart
                .filter(item => item.type === 'selective')
                .sort((a, b) => a.basePrice - b.basePrice); 

            if (selectiveItems.length > 0) {
                const cheapestSelective = selectiveItems[0]; // Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù†Ø·Ø¨Ù‚ Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø®Øµ

                if (nicheCount === 1) {
                    // Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ„: 1 Ù†ÙŠØ´ = Ø³Ù„ÙƒØªÙ Ø¨Ù†ØµÙ Ø§Ù„Ø³Ø¹Ø± (50%)
                    cheapestSelective.finalPrice = cheapestSelective.basePrice / 2;
                    cheapestSelective.isDiscounted = true;

                } else if (nicheCount >= 2) {
                    // Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø«Ø§Ù†ÙŠ: 2 Ù†ÙŠØ´ Ø£Ùˆ Ø£ÙƒØ«Ø± = Ø³Ù„ÙƒØªÙ Ù‡Ø¯ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© (0$)
                    cheapestSelective.finalPrice = 0;
                    cheapestSelective.isDiscounted = true;
                }
            }

            // 4. ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© ÙÙŠ HTML
            renderCartSummary();
        }

        function renderCartSummary() {
            const cartList = document.getElementById('cart-list');
            const totalPriceElement = document.getElementById('total-price');
            let total = 0;
            cartList.innerHTML = ''; 

            cart.forEach(item => {
                total += item.finalPrice;
                const li = document.createElement('li');
                
                let priceText = `${item.finalPrice.toFixed(2)}$`;

                if (item.isDiscounted) {
                    if (item.finalPrice === 0) {
                        priceText = `<span class="gift">Ù‡Ø¯ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©!</span> <del>${item.basePrice.toFixed(2)}$</del>`;
                    } else {
                        priceText = `<span class="discount">${priceText}</span> <del>${item.basePrice.toFixed(2)}$</del> (Ø®ØµÙ… 50%)`;
                    }
                } else {
                    priceText = `${item.basePrice.toFixed(2)}$`;
                }

                li.innerHTML = `<strong>${item.name}</strong> (${item.type === 'niche' ? 'Ù†ÙŠØ´' : 'Ø³Ù„ÙƒØªÙ'}): ${priceText}`;
                cartList.appendChild(li);
            });

            totalPriceElement.textContent = total.toFixed(2) + '$';
        }

        // ********** Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ **********
        function sendOrderViaWhatsApp() {
            if (cart.length === 0) {
                alert("Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ÙØ§Ø±ØºØ©. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø·Ø± ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.");
                return;
            }

            const nicheCount = cart.filter(item => item.type === 'niche').length;
            let message = "ğŸ‰ *Ø·Ù„Ø¨ Ø¹Ø·ÙˆØ± Ø¬Ø¯ÙŠØ¯:*\n";
            let total = 0;

            // Ø¥Ø¶Ø§ÙØ© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø·ÙˆØ± Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            message += "\n*1. Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:*\n";
            cart.forEach(item => {
                total += item.finalPrice;
                let priceText = `${item.finalPrice.toFixed(2)}$`;

                if (item.isDiscounted) {
                    priceText = (item.finalPrice === 0) 
                                ? "ğŸ *Ù‡Ø¯ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©*"
                                : "ğŸ’° *" + item.finalPrice.toFixed(2) + "$* (Ø®ØµÙ… 50%)";
                } else {
                    priceText = item.basePrice.toFixed(2) + "$";
                }

                message += `\n- ${item.name} (${item.type === 'niche' ? 'Ù†ÙŠØ´' : 'Ø³Ù„ÙƒØªÙ'}): ${priceText}`;
            });

            // Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø®Øµ Ø§Ù„Ø¹Ø±Ø¶
            let offerSummary = "\n\n*2. Ù…Ù„Ø®Øµ Ø§Ù„Ø¹Ø±Ø¶:*";
            if (nicheCount === 1) {
                offerSummary += "\n- ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø±Ø¶ *Ø¹Ø·Ø± Ø³Ù„ÙƒØªÙ Ø¨Ù†ØµÙ Ø§Ù„Ø³Ø¹Ø±*.";
            } else if (nicheCount >= 2) {
                offerSummary += "\n- ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø±Ø¶ *Ø¹Ø·Ø± Ø³Ù„ÙƒØªÙ Ù‡Ø¯ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©*.";
            } else {
                offerSummary += "\n- Ù„Ù… ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø±Ø¶ Ø¨Ø¹Ø¯ (Ø§Ø®ØªØ± Ø¹Ø·Ø± Ù†ÙŠØ´ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„).";
            }
            message += offerSummary;
            
            // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
            message += `\n\n====================\n`;
            message += `ğŸ’µ *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:* ${total.toFixed(2)}$`;
            
            // Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø© (Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØµÙˆØ±)
            const pageUrl = window.location.href; 
            message += `\n\nÙ„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„ØµÙˆØ±ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø²ÙŠØ§Ø±Ø©: ${pageUrl}`;


            // ØªØ´ÙÙŠØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ø¹Ù†ÙˆØ§Ù† URL
            const encodedMessage = encodeURIComponent(message);
            
            // *** Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ø¨Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© Ø¨Ø¯ÙˆÙ† +ØŒ Ù…Ø«Ø§Ù„: 96650000000) ***
            const phoneNumber = "9665xxxxxxxx"; 

            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙØªØ­Ù‡
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…ÙØ³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', addToCart);
            });
            
            // Ø±Ø¨Ø· Ø²Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ø§Ù„Ø¯Ø§Ù„Ø©
            document.getElementById('whatsapp-send-button').addEventListener('click', sendOrderViaWhatsApp);
        });
    </script>
</body>
</html>
